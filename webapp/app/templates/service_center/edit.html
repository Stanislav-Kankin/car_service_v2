{% extends "layout/base.html" %}

{% block content %}
<div class="max-w-xl mx-auto py-6">
    <h1 class="text-2xl font-bold mb-4">Редактирование сервиса</h1>

    {% if error_message %}
        <div class="mb-4 p-3 bg-red-100 text-red-800 rounded">
            {{ error_message }}
        </div>
    {% endif %}

    {% if success %}
        <div class="mb-4 p-3 bg-green-100 text-green-800 rounded">
            Изменения сохранены.
        </div>
    {% endif %}

    {% if service_center %}
        <form method="post" class="space-y-4">
            <div>
                <label class="block text-sm font-medium mb-1">Название сервиса *</label>
                <input type="text" name="name" required
                       value="{{ service_center.name or '' }}"
                       class="w-full border rounded px-3 py-2 text-sm">
            </div>

            <div>
                <label class="block text-sm font-medium mb-1">Адрес</label>
                <input type="text" name="address"
                       value="{{ service_center.address or '' }}"
                       class="w-full border rounded px-3 py-2 text-sm">
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-sm font-medium mb-1">Телефон</label>
                    <input type="text" name="phone"
                           value="{{ service_center.phone or '' }}"
                           class="w-full border rounded px-3 py-2 text-sm">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Сайт / соцсети</label>
                    <input type="text" name="website"
                           value="{{ service_center.website or '' }}"
                           class="w-full border rounded px-3 py-2 text-sm">
                </div>
            </div>

            <div>
                <label class="block text-sm font-medium mb-1">Тип организации</label>
                <select name="org_type" class="w-full border rounded px-3 py-2 text-sm">
                    <option value="company"
                        {% if service_center.org_type == "company" or not service_center.org_type %}selected{% endif %}>
                        Юрлицо / сервис
                    </option>
                    <option value="individual"
                        {% if service_center.org_type == "individual" %}selected{% endif %}>
                        Частный мастер
                    </option>
                </select>
            </div>

            <div class="flex flex-col space-y-2 text-sm">
                <label class="flex items-center space-x-2">
                    <input type="checkbox" name="is_mobile_service"
                           {% if service_center.is_mobile_service %}checked{% endif %}>
                    <span>Выездной сервис</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" name="has_tow_truck"
                           {% if service_center.has_tow_truck %}checked{% endif %}>
                    <span>Есть эвакуатор</span>
                </label>
                <label class="flex items-center space-x-2">
                    <input type="checkbox" name="is_active"
                           {% if service_center.is_active %}checked{% endif %}>
                    <span>Сервис активен</span>
                </label>
            </div>

            <div class="pt-2 flex space-x-3">
                <button type="submit"
                        class="px-4 py-2 rounded bg-blue-600 text-white text-sm">
                    Сохранить
                </button>
                <a href="/sc/dashboard" class="px-4 py-2 rounded bg-gray-100 text-sm">
                    Назад к списку
                </a>
            </div>
        </form>
    {% else %}
        <div class="p-4 bg-red-50 border border-red-200 rounded">
            Сервис не найден.
        </div>
    {% endif %}
</div>
{% endblock %}
